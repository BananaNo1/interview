###  OSI七层网络
1. 物理层 
2. 链路层
3. 网络层 
   1. IP
   2. ICMP
   3. ARP  根据IP地址获取物理地址的一个TCP/IP协议
   4. RARP 
4. 传输层
   1. TCP
   2. UDP
5. 会话层
   1. DNS
6. 表示层
7. 应用层
   1. HTTP
   2. FTP

### tcp和udp

|          | udp      | tcp        |
| -------- | -------- | ---------- |
| 是否连接 | 无连接   | 有连接     |
| 传输方式 | 面向报文 | 面向字节流 |
| 是否可靠 | 不可靠   | 可靠传输   |

### 三次握手过程

​		![三次握手](E:/interview/images/network/three.png)



#### 	为什么不是两次？

 防止已经失效的连接请求报文突然又传送到了服务器，从而产生错误。

比如在网络环境比较复杂的情况，客户端可能会连续发送多次请求。如果只设计成两次握手的情况，服务端只能一直接收请求，然后返回请求信息，也不知道客户端是否请求成功。这些过期请求的话就会造成网络连接的混乱。

### 四次挥手过程

![四次挥手](E:/interview/images/network/four.png)

#### **Time_wait和Close_wait**的区别？

TIME_WAIT 是主动关闭链接时形成的，等待2MSL时间，约4分钟。主要是防止最后一个ACK丢失。

​	等待 2MSL 是因为保证服务端接收到了 ACK 报文，因为网络是复杂了，很有可能 ACK 报文丢失了，如果服务端没接收到 ACK 报文的话，会重新发送 FIN 报文，只有当客户端等待了 2MSL 都没有收到重发的 FIN 报文时就表示服务端是正常收到了 ACK 报文，那么这个时候客户端就可以关闭了。

CLOSE_WAIT是被动关闭连接是形成的。

### 为什么需要ARP协议这一步解析

#### 什么是ARP

​	ARP（Address Resolution Protocol，地址解析协议）是用来将IP地址解析为MAC地址的协议。

#### 为什么

在局域网中，当主机或其它三层网络设备有数据要发送给另一台主机或三层网络设备时，需要知道对方的网络层地址（即IP地址）。**但是仅有IP地址是不够的，因为IP报文必须封装成帧才能通过物理网络发送，因此发送方还需要知道接收方的物理地址（即MAC地址）**，这就需要一个通过IP地址获取物理地址的协议，以完成从IP地址到MAC地址的映射。地址解析协议ARP即可实现将IP地址解析为MAC地址。

### 路由器和交换机的区别

	1. 路由器工作在网络层，交换机工作在数据链路层
	2. 路由器根据ip地址寻址，可以处理tcp/ip协议，交换机不可以
	3. 路由器用于不同网络间数据的跨网络传输，交换机用于同一网络内部数据的快速传输

### HTTP 与 HTTPS 的区别

- `Http`明文传输，数据都是未加密的，安全性差；`Https`数据传输过程是加密的，安全性较好。
- `Https`协议需要到CA申请证书
- `http `和 `https` 使用的是完全不同的连接方式，用的端口也不一样，前者是 80，后者是 443。



### HTTPS加密过程



### 介绍XSS攻击 Dos攻击，以及如何防御这些攻击

#### XSS攻击

##### 简析

```
Cross-Site Scripting（跨站脚本攻击）简称 XSS，是一种代码注入攻击。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全。
```

##### 措施

不信任客户端提交的数据，只要是客户端提交的数据就应该先进行相应的过滤处理后方可进行下一步的操作.

### Dos攻击

##### 简析

```
DOS攻击通过在网站的各个环节进行攻击，使得整个流程跑不起来，以达到瘫痪服务为目的。最常见的就是发送大量请求导致服务器过载宕机
```

##### 措施

- 进行实时监控，封禁某些恶意密集型请求IP段
- 增加接口验证，对于某些敏感接口，进行单个IP访问次数限制
- 进行静态资源缓存，隔离源文件的访问，比如CDN加速

- 扩容服务器

### TCP沾包 拆包

**MTU**  最大传输单元   由网络接口层提供给网络层最大一次传输数据的大小

**MSS**  Tcp提交给ip层最大分段大小  指数据大小 不包含头部信息

TCP粘包就是指发送方发送的若干包数据到达接收方时粘成了一包，从接收缓冲区来看，后一包数据的头紧接着前一包数据的尾，出现粘包的原因是多方面的，可能是来自发送方，也可能是来自接收方。

### HTTP 1.0 、1.1、2.0 区别

#### 1.0

##### 特点

浏览器的每次请求都需要与服务器建立一个TCP连接，服务器处理完成后立即断开TCP连接(无连接)，服务器不跟踪每个客户端也不记录过去的请求(无状态)。

##### 缺陷

1. 无法复用连接。每次发送请求都需要进行一次TCP连接，而TCP连接释放过程又是比较费事的。这种无连接特性会导致网络效率非常低。
2. 队头阻塞。由于HTTP/1.0规定下一个请求必须在前一个请求响应到达之前才能发送。假设一个响应请求一直不到达，那么下一个请求就不发送，就会导致阻塞后面的请求。

#### 1.1

